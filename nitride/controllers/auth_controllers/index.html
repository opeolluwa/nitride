<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="authentication controllers it contain the following endpoints POST `/auth/sign-up` - sign up a user POST `/auth/login` - login a user GET `/auth/me` - get user profile PUT `/auth/me` - update the user profile    "><meta name="keywords" content="rust, rustlang, rust-lang, auth_controllers"><title>nitride::controllers::auth_controllers - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceSerif4-Regular-1f7d512b176f0f72.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceSerif4-Bold-124a1ca42af929b6.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../../static.files/rustdoc-b07ed6aaa412307b.css" id="mainThemeStyle"><link rel="stylesheet" id="themeStyle" href="../../../static.files/light-d695502c06d5afea.css"><link rel="stylesheet" disabled href="../../../static.files/dark-aa222ca57e08648b.css"><link rel="stylesheet" disabled href="../../../static.files/ayu-4eb006a26ee168b0.css"><script id="default-settings" ></script><script src="../../../static.files/storage-d43fa987303ecbbb.js"></script><script defer src="../../../static.files/main-4a084badb5778746.js"></script><noscript><link rel="stylesheet" href="../../../static.files/noscript-13285aec31fa243e.css"></noscript><link rel="alternate icon" type="image/png" href="../../../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../../../nitride/index.html"><div class="logo-container"><img class="rust-logo" src="../../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></div></a><h2></h2></nav><nav class="sidebar"><a class="sidebar-logo" href="../../../nitride/index.html"><div class="logo-container"><img class="rust-logo" src="../../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></div></a><h2 class="location"><a href="#">Module auth_controllers</a></h2><div class="sidebar-elems"><section><ul class="block"><li><a href="#constants">Constants</a></li><li><a href="#statics">Statics</a></li><li><a href="#functions">Functions</a></li><li><a href="#opaque-types">Opaque Types</a></li></ul></section></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press â€˜Sâ€™ to search, â€˜?â€™ for more optionsâ€¦" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../../../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../../static.files/wheel-5ec35bf9ca753509.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1 class="fqn">Module <a href="../../index.html">nitride</a>::<wbr><a href="../index.html">controllers</a>::<wbr><a class="mod" href="#">auth_controllers</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="srclink" href="../../../src/nitride/controllers/auth_controllers.rs.html#1-529">source</a> Â· <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>authentication controllers
it contain the following endpoints
POST <code>/auth/sign-up</code> - sign up a user
POST <code>/auth/login</code> - login a user
GET <code>/auth/me</code> - get user profile
PUT <code>/auth/me</code> - update the user profile    </p>
</div></details><h2 id="constants" class="small-section-header"><a href="#constants">Constants</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="constant" href="constant.ACCESS_TOKEN_VALIDITY.html" title="nitride::controllers::auth_controllers::ACCESS_TOKEN_VALIDITY constant">ACCESS_TOKEN_VALIDITY</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div><div class="item-right docblock-short">the bearer token validity set to 10 minutes</div></div><div class="item-row"><div class="item-left module-item"><a class="constant" href="constant.REFRESH_TOKEN_VALIDITY.html" title="nitride::controllers::auth_controllers::REFRESH_TOKEN_VALIDITY constant">REFRESH_TOKEN_VALIDITY</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div><div class="item-right docblock-short">refresh token set to 25 minutes</div></div></div><h2 id="statics" class="small-section-header"><a href="#statics">Statics</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="static" href="static.JWT_SECRET.html" title="nitride::controllers::auth_controllers::JWT_SECRET static">JWT_SECRET</a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div><div class="item-right docblock-short">fetch the JWT defined environment and assign itâ€™s value to a life
call on the new method of JwtEncryption keys to accept and pass down the secret to the jsonwebtoken crate EncodingKey and DecodingKey modules</div></div></div><h2 id="functions" class="small-section-header"><a href="#functions">Functions</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn._request_new_token.html" title="nitride::controllers::auth_controllers::_request_new_token fn">_request_new_token</a></div><div class="item-right docblock-short">request new token (OTP)
to request new OTP, it must be that the user account has not been confirmed
or in the case of password reset
at any rate, the token will accept email to return a JWT token to the user
the returned JWT will contain the required information needed by the server for further processing
the server will also send new token to the userâ€™s email if the email as found</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.get_refresh_token.html" title="nitride::controllers::auth_controllers::get_refresh_token fn">get_refresh_token</a></div><div class="item-right docblock-short">get refresh token</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.login.html" title="nitride::controllers::auth_controllers::login fn">login</a></div><div class="item-right docblock-short">Login a New User :
to login a user, fetch the request body and the database pool
use the pool to query the database for the user details in the request body
return result or error</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.reset_password.html" title="nitride::controllers::auth_controllers::reset_password fn">reset_password</a></div><div class="item-right docblock-short">reset user password</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.sign_up.html" title="nitride::controllers::auth_controllers::sign_up fn">sign_up</a></div><div class="item-right docblock-short">basic auth sign_up</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.update_user_profile.html" title="nitride::controllers::auth_controllers::update_user_profile fn">update_user_profile</a></div><div class="item-right docblock-short">Get the user profile fom the database.
to do this
Get the jwt token fom the header,
Validate the token then get the user_id from the validated token
go on to destructure the payload,
use SQL COALESCE($1, a)  to update the fields<br />
return the user details if no error else return the appropriate error code and response</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.user_profile.html" title="nitride::controllers::auth_controllers::user_profile fn">user_profile</a></div><div class="item-right docblock-short">Get the user profile fom the database.
To do this,
Get the jwt token fom the header,
Validate the token then get the user_id from the validated token</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.verify_email.html" title="nitride::controllers::auth_controllers::verify_email fn">verify_email</a></div><div class="item-right docblock-short">verify email
to verify email
retrieve the bearer token fo=rom the auth header,
retrieve the otp from request body
validate token and updates account status
return error or success response</div></div></div><h2 id="opaque-types" class="small-section-header"><a href="#opaque-types">Opaque Types</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="opaque" href="opaque..html" title="nitride::controllers::auth_controllers:: opaque"></a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div></div><div class="item-row"><div class="item-left module-item"><a class="opaque" href="opaque..html" title="nitride::controllers::auth_controllers:: opaque"></a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div></div><div class="item-row"><div class="item-left module-item"><a class="opaque" href="opaque..html" title="nitride::controllers::auth_controllers:: opaque"></a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div></div><div class="item-row"><div class="item-left module-item"><a class="opaque" href="opaque..html" title="nitride::controllers::auth_controllers:: opaque"></a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div></div><div class="item-row"><div class="item-left module-item"><a class="opaque" href="opaque..html" title="nitride::controllers::auth_controllers:: opaque"></a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div></div><div class="item-row"><div class="item-left module-item"><a class="opaque" href="opaque..html" title="nitride::controllers::auth_controllers:: opaque"></a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div></div><div class="item-row"><div class="item-left module-item"><a class="opaque" href="opaque..html" title="nitride::controllers::auth_controllers:: opaque"></a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div></div><div class="item-row"><div class="item-left module-item"><a class="opaque" href="opaque..html" title="nitride::controllers::auth_controllers:: opaque"></a><span title="Restricted Visibility">&nbsp;ðŸ”’</span> </div></div></div></section></div></main><div id="rustdoc-vars" data-root-path="../../../" data-static-root-path="../../../static.files/" data-current-crate="nitride" data-themes="" data-resource-suffix="" data-rustdoc-version="1.68.0-nightly (88c58e3c2 2022-12-26)" data-search-js="search-181581080540673f.js" data-settings-js="settings-bebeae96e00e4617.js" data-settings-css="settings-58836c674e2f7bd2.css" ></div></body></html>